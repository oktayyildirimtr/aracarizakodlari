# Çok Dilli (i18n) Yapı

## Veritabanı – Dil Desteği

`fault_codes` tablosu:
- `title_en`, `description_en`, `expert_opinion_en`, `drive_safe_en`

`faq` tablosu:
- `question_en`, `answer_en`

`estimated_costs` tablosu:
- `notes_en`

**Migration:** `npm run db:migrate` ile yeni sütunlar eklenir.
**Seed:** `db-seed` P0171, P0420, P0300 için İngilizce içerik ekler. `db-seed-all` toplu kodlar için `title_en`, `expert_opinion_en`, `drive_safe_en` üretir.

## URL Yapısı

| Dil   | Örnek URL'ler |
|-------|----------------|
| Türkçe (varsayılan) | `/tr`, `/tr/kodlar`, `/tr/p0171-nedir`, `/tr/hakkimizda`, `/tr/iletisim` |
| İngilizce           | `/en`, `/en/codes`, `/en/p0171-meaning`, `/en/about`, `/en/contact` |

- Kök (`/`) → `/tr/` yönlendirmesi
- Arıza kodları: TR `-nedir`, EN `-meaning` soneki

## Klasör Yapısı

```
src/
├── lib/
│   └── i18n.ts          # Dil sabitleri, UI metinleri, hreflang yardımcıları
├── layouts/
│   └── Layout.astro     # lang prop, dil değiştirici, hreflang
├── pages/
│   ├── index.astro      # / → /tr/ redirect
│   ├── 404.astro
│   ├── tr/
│   │   ├── index.astro
│   │   ├── kodlar.astro
│   │   ├── hakkimizda.astro
│   │   ├── iletisim.astro
│   │   ├── gizlilik-politikasi.astro
│   │   ├── cerez-bildirimi.astro
│   │   ├── 404.astro
│   │   └── [slug].astro   # p0171-nedir vb.
│   └── en/
│       ├── index.astro
│       ├── codes.astro
│       ├── about.astro
│       ├── contact.astro
│       ├── privacy-policy.astro
│       ├── cookie-policy.astro
│       ├── 404.astro
│       └── [slug].astro   # p0171-meaning vb.
```

## hreflang Örneği

Her sayfada:

```html
<link rel="alternate" hreflang="tr" href="https://obdfaultcode.com/tr/p0171-nedir" />
<link rel="alternate" hreflang="en" href="https://obdfaultcode.com/en/p0171-meaning" />
<link rel="alternate" hreflang="x-default" href="https://obdfaultcode.com/tr/p0171-nedir" />
```

`x-default` varsayılan dili (Türkçe) işaret eder.

## Dil Değiştirici

- Metin olarak: **TR | EN**
- Bayrak yok
- Aynı sayfanın karşı dil versiyonuna gider (örn. `/tr/p0171-nedir` ↔ `/en/p0171-meaning`)

## Yeni Dil Ekleme (DE, ES, FR vb.)

1. `src/lib/i18n.ts`: `Lang` tipine ekle, `LANGUAGES`, `UI`, `ROUTES`, `FAULT_SLUG` güncelle
2. `src/pages/[yeni-lang]/`: TR/EN yapısına benzer sayfalar oluştur
3. `Layout.astro`: dil değiştiriciye yeni dil ekle
4. `getAlternatePath`, `getHreflangUrls`: yeni dili dahil et
5. `scripts/generate-sitemap.js`: yeni dil URL'lerini ekle

## Sık Yapılan Hatalar

| Hata | Öneri |
|------|--------|
| Aynı içeriği çeviriyle kopyalamak | Her dilde özgün, doğal metin kullan |
| Alt domain (tr.site.com) | Tek domain, dil path'i (/tr/, /en/) kullan |
| Eksik hreflang | Her sayfada tr, en ve x-default linkleri olmalı |
| Canonical yanlış | Her sayfa kendi tam URL'sine canonical vermeli |
| Dil değiştiricide bayrak | Metin (TR, EN) kullan |
| Otomatik çeviri | İnsan yazımı veya profesyonel çeviri tercih et |
