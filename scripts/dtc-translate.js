/**
 * OBD-II İngilizce arıza tanımlarını Türkçeye çevirir.
 * SAE/ISO uyumlu dtcmapping tanımları için kullanılır.
 */

const TR = {
  // Bileşenler / sistemler
  'Mass or Volume Air flow': 'Kütle veya hacimsel hava debisi (MAF)',
  'Mass or Volume Air Flow': 'Kütle veya hacimsel hava debisi (MAF)',
  'Manifold Absolute Pressure': 'Manifold mutlak basıncı (MAP)',
  'Barometric Pressure': 'Barometrik basınç',
  'Intake Air Temperature': 'Emme hava sıcaklığı',
  'Engine Coolant Temperature': 'Motor soğutma suyu sıcaklığı',
  'Throttle Pedal Position Sensor': 'Gaz pedalı konum sensörü',
  'Throttle/Pedal Position Sensor': 'Gaz pedalı konum sensörü',
  'O2 Sensor': 'Oksijen sensörü (O2)',
  'Heated Oxygen Sensor': 'Isıtmalı oksijen sensörü (HO2S)',
  'HO2S': 'Isıtmalı oksijen sensörü (HO2S)',
  'H02S': 'Isıtmalı oksijen sensörü (HO2S)',
  'Exhaust Gas Recirculation': 'Egzoz gazı geri dönüşümü (EGR)',
  'Evaporative Emission Control System': 'Buhar emisyon kontrol sistemi',
  'Evaporative Emission System': 'Buhar emisyon sistemi',
  'Evaporative Emissions System': 'Buhar emisyon sistemi',
  'Vehicle Speed Sensor': 'Araç hız sensörü',
  'Crankshaft Position': 'Krank mili pozisyonu',
  'Camshaft Position': 'Eksantrik mili pozisyonu',
  'Knock Sensor': 'Vuruntu sensörü',
  'Ignition Coil': 'Ateşleme bobini',
  'Fuel Pump': 'Yakıt pompası',
  'Fuel Rail': 'Yakıt rayı',
  'Fuel Pressure Regulator': 'Yakıt basınç regülatörü',
  'Injector': 'Enjektör',
  'Torque Converter': 'Tork konvertörü',
  'Transmission': 'Şanzıman',
  'Turbocharger': 'Türboşarj',
  'Turbo/Super Charger': 'Türbo/süperşarj',
  'Supercharger': 'Süperşarj',
  'Catalyst': 'Katalizör',
  'Catalyst System': 'Katalizör sistemi',
  'Glow Plug': 'Kızdırma bujisi',
  'Idle': 'Rölanti',
  'Cruise Control': 'Hız sabitleyici',
  'Engine Oil': 'Motor yağı',
  'Cooling Fan': 'Soğutma fanı',
  'A/C': 'Klima',
  'Air Conditioner': 'Klima',
  'Power Steering': 'Hidrolik direksiyon',
  'Brake': 'Fren',
  'Clutch': 'Debriyaj',
  'Shift Solenoid': 'Vites solenoidi',
  'Pressure Control Solenoid': 'Basınç kontrol solenoidi',
  'Transmission Fluid': 'Şanzıman yağı',
  'Transmission Range Sensor': 'Şanzıman konum sensörü',
  'Input/Turbine Speed Sensor': 'Giriş/türbin hız sensörü',
  'Output Speed Sensor': 'Çıkış hız sensörü',
  'Engine Speed': 'Motor devri',
  'ECM': 'Motor kontrol modülü (ECM)',
  'PCM': 'Güç aktarım modülü (PCM)',
  'TCM': 'Şanzıman kontrol modülü (TCM)',
  'ECM/PCM': 'ECM/PCM',
  'Generator': 'Alternatör',
  'Starter': 'Marş',
  'Malfunction Indicator Lamp': 'Arıza lambası (MIL)',
  'MIL': 'Arıza lambası (MIL)',
  'Sensor A': 'Sensör A',
  'Sensor B': 'Sensör B',
  'Sensor 1': 'Sensör 1',
  'Sensor 2': 'Sensör 2',
  'Sensor 3': 'Sensör 3',
  'Bank 1': 'Bank 1',
  'Bank 2': 'Bank 2',
  'Cylinder 1': 'Silindir 1',
  'Cylinder 2': 'Silindir 2',
  'Cylinder 3': 'Silindir 3',
  'Cylinder 4': 'Silindir 4',
  'Cylinder 5': 'Silindir 5',
  'Cylinder 6': 'Silindir 6',
  'Cylinder 7': 'Silindir 7',
  'Cylinder 8': 'Silindir 8',
  'Cylinder 9': 'Silindir 9',
  'Cylinder 10': 'Silindir 10',
  'Cylinder 11': 'Silindir 11',
  'Cylinder 12': 'Silindir 12',
  'Gear 1': '1. vites',
  'Gear 2': '2. vites',
  'Gear 3': '3. vites',
  'Gear 4': '4. vites',
  'Gear 5': '5. vites',
  'Gear 6': '6. vites',
  'Reverse': 'Geri vites',
  'Secondary Air Injection System': 'İkincil hava enjeksiyon sistemi',
  'Ambient Air Temperature': 'Ortam hava sıcaklığı',
  'Intake Camshaft': 'Emme eksantrik mili',
  'Exhaust Camshaft': 'Egzoz eksantrik mili',
  'Intake Valve': 'Emme supabı',
  'Exhaust Valve': 'Egzoz supabı',
  'Fuel Volume Regulator': 'Yakıt hacim regülatörü',
  'Fuel Shutoff Valve': 'Yakıt kesme valfi',
  'Engine Position System': 'Motor pozisyon sistemi',
  'Camshaft Position Actuator': 'Eksantrik mili pozisyon aktüatörü',
  'Camshaft Position Timing': 'Eksantrik mili pozisyon zamanlaması',
  'Valve Control Solenoid': 'Supap kontrol solenoidi',
  'Bypass Valve': 'Bypass valfi',
  'Purge flow': 'purge debisi',
  'fuel cap loose/off': 'yakıt kapağı gevşek/kapalı',
  'Injection lump': 'Enjeksiyon pompası',
  'Injection Pump': 'Enjeksiyon pompası',

  // Devre / sinyal durumları (uzun->kısa sıra)
  'Circuit Range/Performance Problem': 'devresi aralık/performans sorunu',
  'Circuit Range/Performance': 'devresi aralık/performans sorunu',
  'Circuit Low Input': 'devresi düşük giriş sinyali',
  'Circuit low Input': 'devresi düşük giriş sinyali',
  'Circuit High Input': 'devresi yüksek giriş sinyali',
  'Circuit Low Voltage': 'devresi düşük gerilim',
  'Circuit High Voltage': 'devresi yüksek gerilim',
  'Circuit Malfunction': 'devre arızası',
  'Circuit / Open': 'devresi açık',
  'Circuit Open': 'devresi açık',
  'Circuit Shorted': 'devresi kısa devre',
  'Circuit Low': 'devresi düşük',
  'Circuit High': 'devresi yüksek',
  'Circuit Intermittent': 'devresi aralıklı',
  'Circuit Intermittent/Erratic': 'devresi aralıklı/düzensiz',
  'Circuit No Signal': 'devresi sinyal yok',
  'Circuit No Activity Detected': 'devresi aktivite tespit edilmedi',
  'Circuit Slow Response': 'devresi yavaş tepki',
  'Circuit or Circuit Low': 'devresi veya devre düşük',
  'Circuit or Circuit High': 'devresi veya devre yüksek',
  'low Input': 'düşük giriş',
  'High Input': 'yüksek giriş',
  'Low Input': 'düşük giriş',
  'Intermittent': 'aralıklı',
  'Malfunction': 'arıza',
  'Detected': 'tespit edildi',
  'Too Low': 'çok düşük',
  'Too High': 'çok yüksek',
  'Insufficient': 'yetersiz',
  'Incorrect': 'yanlış',
  'Excessive': 'aşırı',
  'Incorrect Flow Detected': 'yanlış debi tespit edildi',
  'leak Detected': 'kaçak tespit edildi',
  'Leak Detected': 'kaçak tespit edildi',
  'Small Leak': 'küçük kaçak',
  'Large Leak': 'büyük kaçak',
  'Gross Leak': 'ciddi kaçak',
  'Stuck Off': 'kapalı kaldı',
  'Stuck On': 'açık kaldı',
  'Performance or Stuck Off': 'performans sorunu veya kapalı kaldı',
  'Performance or Stuck On': 'performans sorunu veya açık kaldı',
  'Stuck off': 'kapalı kaldı',
  'Stuck On': 'açık kaldı',
  ' A low': ' A düşük',
  ' A High': ' A yüksek',
  ' B low': ' B düşük',
  ' B High': ' B yüksek',
  ' C low': ' C düşük',
  ' C High': ' C yüksek',
  'Over-Advanced': 'çok ileri',
  'Over-Retarded': 'çok geri',
  'Below Threshold': 'eşiğin altında',
  'Too Lean': 'çok yoksul',
  'Too Rich': 'çok zengin',
  'Overspeed': 'aşırı hız',
  'Underboost': 'düşük basınç',
  'Overboost': 'aşırı basınç',
  'Over Temperature': 'aşırı sıcaklık',
  'Over Speed': 'aşırı devir',
  'Overtemp': 'aşırı sıcak',
  'Correlation': 'korelasyon',
  'Not Learned': 'öğrenilmedi',
  'Not Programmed': 'programlanmadı',
  'Mismatch': 'uyumsuzluk',
  'Range/Performance': 'aralık/performans',
  'Contribution/Balance Fault': 'katkı/denge arızası',
  'Control Circuit': 'kontrol devresi',
  'Heater Control Circuit': 'ısıtıcı kontrol devresi',
  'Heater Circuit': 'ısıtıcı devresi',
  'Heater Resistance': 'ısıtıcı direnci',
  'Swapped': 'yer değiştirmiş',
  'Signals Swapped': 'sinyaller karışmış',
  'Bypass Valve': 'bypass valfi',
  'Wastegate Solenoid': 'wastegate solenoidi',
  'Boost Control': 'basınç kontrolü',
  'Boost Sensor': 'basınç sensörü',
  'Purge Control Valve': 'purge kontrol valfi',
  'Vent Control Circuit': 'havalandırma kontrol devresi',
  'Pressure Sensor': 'basınç sensörü',
  'Temperature Sensor': 'sıcaklık sensörü',
  'Position Sensor': 'konum sensörü',
  'Actuator Circuit': 'aktüatör devresi',
  'Solenoid Circuit': 'solenoid devresi',
  'Switch Circuit': 'anahtar devresi',
  'Relay Circuit': 'röle devresi',
  'Input Circuit': 'giriş devresi',
  'Output Circuit': 'çıkış devresi',
  'Primary Circuit': 'birincil devre',
  'Secondary Circuit': 'ikincil devre',
  'Fuel Trim': 'yakıt trim',
  'Fuel Composition': 'yakıt bileşimi',
  'Fuel Delivery': 'yakıt dağıtımı',
  'Fuel Timing': 'yakıt zamanlaması',
  'Misfire Detected': 'ateşleme atlaması tespit edildi',
  'Misfire': 'ateşleme atlaması',
  'Random/Multiple Cylinder Misfire': 'rastgele/çoklu silindir ateşleme atlaması',
  'Single Cylinder Misfire': 'tek silindir ateşleme atlaması',
  'Catalyst System Efficiency': 'katalizör sistem verimliliği',
  'Warm Up Catalyst': 'ısınma katalizörü',
  'Main Catalyst': 'ana katalizör',
  'Heated Catalyst': 'ısıtmalı katalizör',
  'System Too Lean': 'Karışım çok yoksul',
  'System Too Rich': 'Karışım çok zengin',
  'PRNDL Input': 'PRNDL girişi',
  'Incorrect Gear Ratio': 'yanlış vites oranı',
  'Incorrect Ratio': 'yanlış oran',
  'Multiple Gears Engaged': 'birden fazla vites girişte',
  'Component Slipping': 'bileşen kayması',
  'Fluid Deteriorated': 'yağ bozulmuş',
  'No trouble code': 'Arıza kodu yok',
  'More details...': '',
  ' - ': ' – ',
  ' / ': ' / ',
  ' (': ' (',
  ' or ': ' veya ',
};

/** İngilizce OBD-II tanımını Türkçeye çevirir. */
export function translateEnToTr(en) {
  if (!en || typeof en !== 'string') return null;
  let s = en.trim();
  if (!s) return null;

  // Uzun eşleşmeler önce (özel ifadeler)
  const order = Object.keys(TR).sort((a, b) => b.length - a.length);
  for (const key of order) {
    const val = TR[key];
    if (val) s = s.replace(new RegExp(key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi'), val);
  }

  // Küçük düzeltmeler
  s = s.replace(/\s+/g, ' ').replace(/\s+\./g, '.').trim();
  if (!s) return null;
  return s + '. Doğru teşhis için yetkili serviste ölçüm yaptırın.';
}
